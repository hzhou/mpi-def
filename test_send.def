include: c/mpi.def

page: test_send, mpi_frame
    module: c
    exe: mpiexec -np 4 out/test_send

    $print Hello world from $mpi_name, $mpi_id/$mpi_size

    &call p2p_region, 0, 1
        $local tn_data

        $(if:is_main)
            tn_data = 1234
        $call send_to, &tn_data, 1, MPI_INT
        $(if:!is_main)
            $print Node $(_p): received data from node $(p1): $tn_data

        $(if:!is_main)
            tn_data = 4321
        $call send_back, &tn_data, 1, MPI_INT
        $(if:is_main)
            $print Node $(_p): received data from node $(p2): $tn_data
